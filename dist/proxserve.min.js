parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"GM15":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NID=exports.ND=exports.eventNames=exports.proxyStatuses=exports.proxyTypes=void 0;let e=["Object","Array","Map"];exports.proxyTypes=e;let t=["active","stopped","blocked","splicing"];exports.proxyStatuses=t;let o=["create","update","delete","splice"];exports.eventNames=o;let r=Symbol.for("proxserve_node_data");exports.ND=r;let s=Symbol.for("proxserve_node_inherited_data");exports.NID=s;
},{}],"MDxB":[function(require,module,exports) {
"use strict";function e(e){let t=Object.prototype.toString.call(e);return t.substring(8,t.length-1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.realtypeof=e,exports.simpleClone=r,exports.splitPath=l,exports.evalPath=n;let t=new WeakSet;function r(l){let n,o=e(l);if("Object"===o){t.add(l),n={};let e=Object.keys(l);for(let o of e)t.has(l[o])?n[o]=l[o]:n[o]=r(l[o])}else if("Array"===o){t.add(l),n=[];for(let e=0;e<l.length;e++)t.has(l[e])?n[e]=l[e]:n[e]=r(l[e])}else n=l,"Undefined"!==o&&"Null"!==o&&"Boolean"!==o&&"Number"!==o&&"BigInt"!==o&&"String"!==o&&console.warn(`Can't clone a variable of type ${o}`);return n}function l(e){if("string"!=typeof e||""===e)return[];let t=0,r=!1,l=!1;"."===e[0]?t=1:"["===e[0]&&(t=1,r=!0,l=!0);let n=[],o="";for(;t<e.length;t++){let i=e[t];if(r)if("]"===i)l?n.push(parseInt(o,10)):n.push(o),r=!1,l=!1,o="";else{if(l){let e=i.charCodeAt(0);(e<48||e>57)&&(l=!1)}o+=i}else"["===i&&(r=!0,l=!0),"."===i||"["===i?""!==o&&(n.push(o),o=""):o+=i}return""!==o&&n.push(o),n}function n(e,t){if(""===t)return{object:e,property:void 0,value:e};let r,n=l(t);for(r=0;r<=n.length-2;r++)if(void 0===(e=e[n[r]]))throw new Error(`Invalid path was given - "${t}"`);return{object:e,property:n[r],value:e[n[r]]}}
},{}],"tgn0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.property2path=r,exports.unproxify=o,exports.createDataNode=a;var e=require("./global-vars.js"),t=require("./general-functions.js");function r(e,r){if("symbol"==typeof r)throw new Error("property of type \"symbol\" isn't path'able");let o=(0,t.realtypeof)(e);switch(o){case"Object":return`.${r}`;case"Array":return`[${r}]`;default:return console.warn(`Not Implemented (type of '${o}')`),r}}function o(r){let a=(0,t.realtypeof)(r);if(e.proxyTypes.includes(a)){let e=r;try{e=r.$getOriginalTarget()}catch(s){}switch(a){case"Object":let t=Object.keys(e);for(let r of t)e[r]=o(e[r]);break;case"Array":for(let r=0;r<e.length;r++)e[r]=o(e[r]);break;default:console.warn(`Not Implemented (type of '${typeofobj}')`)}return e}return r}function a(t,o){let a;a=t[e.ND]&&t[e.ND].objects&&t[e.ND].objects.target?r(t[e.ND].objects.target,o):r({},o);let s=t[o];return s||(s={[e.NID]:Object.create(t[e.NID]),[e.ND]:{parentNode:t,listeners:{shallow:[],deep:[]}}},t[o]=s),delete s[e.NID].status,Object.assign(s[e.ND],{path:t[e.ND].path+a,propertyPath:a,objects:Object.assign(Object.create(t[e.ND].objects),{target:void 0,proxy:void 0,revoke:void 0})}),s}
},{"./global-vars.js":"GM15","./general-functions.js":"MDxB"}],"IDhP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stop=s,exports.block=o,exports.activate=n,exports.on=i,exports.once=l,exports.removeListener=a,exports.removeAllListeners=u,exports.getOriginalTarget=p,exports.getProxserveObjects=f,exports.getProxserveDataNode=c,exports.getProxserveInstance=x,exports.splice=v;var e=require("./global-vars.js"),t=require("./supporting-functions.js"),r=require("./general-functions.js");function s(t){t[e.NID].status=e.proxyStatuses[1]}function o(t){t[e.NID].status=e.proxyStatuses[2]}function n(t,r,s=!1){s||t===this.dataTree?t[e.NID].status=e.proxyStatuses[0]:delete t[e.NID].status}function i(s,o,n,i,l,a,u=!1){Array.isArray(n)||(n=[n]);for(let t of n)if(!e.eventNames.includes(t))throw new Error(`${t} is not a valid event. valid events are ${e.eventNames.join(",")}`);if("function"==typeof i)a=l,l=i,i="";else if("function"!=typeof l)throw new Error("invalid arguments were given. listener must be a function");let p=(0,r.splitPath)(i);for(let e of p)s[e]||(0,t.createDataNode)(s,e),s=s[e];s[e.ND].listeners||(s[e.ND].listeners=[],s[e.ND].eventPool=[]);for(let t of n)s[e.ND].listeners.push([t,l,a,u])}function l(e,t,r,s,o,n){i.call(this,e,t,r,s,o,n,!0)}function a(t,s,o,n){3===arguments.length&&(n=o,o="");let i=`${t[e.ND].path}${o}`,l=(0,r.splitPath)(o);for(let e of l){if(!t[e])return void console.warn(`can't remove listener from a non-existent path '${i}'`);t=t[e]}if(t[e.ND].listeners){let r=t[e.ND].listeners;for(let e=r.length-1;e>=0;e--)("function"!=typeof n&&r[e][2]===n||"function"==typeof n&&r[e][1]===n)&&r.splice(e,1);0===r.length&&(delete t[e.ND].listeners,delete t[e.ND].eventPool)}}function u(t,s,o=""){let n=`${t[e.ND].path}${o}`,i=(0,r.splitPath)(o);for(let e of i){if(!t[e])return void console.warn(`can't remove all listeners from a non-existent path '${n}'`);t=t[e]}t[e.ND].listeners&&(delete t[e.ND].listeners,delete t[e.ND].eventPool)}function p(e,t){return t.target}function f(e,t){return t}function c(e){return e}function x(){return this}function v(t,r,s,o,...n){if(t[e.NID].status!==e.proxyStatuses[0])return Array.prototype.splice.call(r.proxy,s,o,...n);t[e.NID].status=e.proxyStatuses[3];r.target.slice(0);let i=Array.prototype.splice.call(r.proxy,s,o,...n);return t[e.NID].status=e.proxyStatuses[0],i}
},{"./global-vars.js":"GM15","./supporting-functions.js":"tgn0","./general-functions.js":"MDxB"}],"Focm":[function(require,module,exports) {
"use strict";var e=require("./supporting-functions.js"),t=s(require("./reserved-methods.js")),r=require("./general-functions.js");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var l=s?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}let i=Symbol.for("proxserve_node_data"),l=Symbol.for("proxserve_node_inherited_data"),c=Object.keys(t);for(let p=c.length-1;p>=0;p--){let e=c[p],r="$"+e;t[r]=t[e],c.push(r)}class n{constructor(t,{strict:r=!0,emitReference:o=!1,emitSplice:s=!0}={}){return this.strict=r,this.emitReference=o,this.emitSplice=s,this.dataTree=(0,e.createDataNode)({[l]:{status:e.proxyStatuses[0]},[i]:{objects:{isDeleted:!1}},isTreePrototype:!0},""),this.dataTree[i].path="",this.dataTree[i].propertyPath="",this.dataTree[i].objects.target=t,this.createProxy(this.dataTree)}createProxy(o,s){let p;void 0===s?p=o:(p=(0,e.createDataNode)(o,s))[i].objects.target=o[i].objects.target[s];let y=p[i].objects,a=y.target,u=(0,r.realtypeof)(a);if(e.proxyTypes.includes(u)){let o=Proxy.revocable(a,{get:(e,r,o)=>c.includes(r)&&(void 0===e[r]||"splice"===r&&Array.isArray(e))?t[r].bind(this,p,y):e.propertyIsEnumerable(r)&&"symbol"!=typeof r&&p[r]&&p[r][i].objects.proxy&&Object.getPrototypeOf(p[r][i].objects)===y?p[r][i].objects.proxy:e[r],set:(t,o,s,c)=>{if(p[l].status===e.proxyStatuses[2])return console.error(`can't change value of property '${o}'. object is blocked.`),!0;if("symbol"==typeof o)return t[o]=s,!0;if("length"!==o&&!t.propertyIsEnumerable(o)){let e=Object.getOwnPropertyDescriptor(t,o);if("object"==typeof e&&!1===e.enumerable)return t[o]=s,!0}let y,a=t[o],u=!1;void 0!==p[o]&&void 0!==p[o][i].objects.proxy&&(y=p[o][i].objects.proxy,p[o][i].objects.isDeleted=!0,this.strict&&(u=!0)),s=(0,e.unproxify)(s),t[o]=s;let d=s,f=!1,b=(0,r.realtypeof)(s);return e.proxyTypes.includes(b)&&(this.createProxy(p,o),d=p[o][i].objects.proxy,f=!0),this.emitReference||(d=(0,r.simpleClone)(d),a=(0,r.simpleClone)(a)),emitEvent(p,o,a,void 0!==y,d,f),u&&setTimeout(()=>{n.destroy(y)},1e3),!0},defineProperty:(t,o,s)=>{if("symbol"==typeof o)return Object.defineProperty(t,o,s),!0;let l,c=t[o],y=!1;void 0!==p[o]&&void 0!==p[o][i].objects.proxy&&(l=p[o][i].objects.proxy,p[o][i].objects.isDeleted=!0,this.strict&&(y=!0)),s.value=(0,e.unproxify)(s.value),Object.defineProperty(t,o,s);let a=s.value,u=a,d=!1,f=(0,r.realtypeof)(s.value);return e.proxyTypes.includes(f)&&!0===s.enumerable&&(this.createProxy(p,o),d=!0,u=a=p[o][i].objects.proxy,this.emitReference||(u=(0,r.simpleClone)(u),c=(0,r.simpleClone)(c))),(0,e.add2emitQueue_bubble)(p,o,c,void 0!==l,u,d),y&&setTimeout(()=>{n.destroy(l)},1e3),!0},deleteProperty:(t,o)=>{if(!t.propertyIsEnumerable(o)||"symbol"==typeof o)return delete t[o],!0;if(p[l].status===e.proxyStatuses[2])return console.error(`can't delete property '${o}'. object is blocked.`),!0;if(o in t){let s,l=t[o];this.emitReference||(l=(0,r.simpleClone)(l));let c=!1;return void 0!==p[o]&&void 0!==p[o][i].objects.proxy&&(s=p[o][i].objects.proxy,p[o][i].objects.isDeleted=!0,this.strict&&(c=!0)),delete t[o],(0,e.add2emitQueue_bubble)(p,o,l,void 0!==s,void 0,!1),c&&setTimeout(()=>{n.destroy(s)},1e3),!0}return!0}});if(p[i].objects.proxy=o.proxy,p[i].objects.revoke=o.revoke,"Object"===u){let t=Object.keys(a);for(let o of t){let t=(0,r.realtypeof)(a[o]);e.proxyTypes.includes(t)&&this.createProxy(p,o)}}else if("Array"===u)for(let t=0;t<a.length;t++){let o=(0,r.realtypeof)(a[t]);e.proxyTypes.includes(o)&&this.createProxy(p,t)}else console.warn("Not Implemented");return o.proxy}throw new Error("Must observe an "+e.proxyTypes.join("/"))}static destroy(t){let o;try{o=t.$getProxserveObjects()}catch(i){return}o.isDeleted||(o.isDeleted=!0);let s=(0,r.realtypeof)(t);if(e.proxyTypes.includes(s)){if("Object"===s){let o=Object.keys(t);for(let s of o)try{let o=(0,r.realtypeof)(t[s]);e.proxyTypes.includes(o)&&n.destroy(t[s])}catch(i){console.error(i)}}else if("Array"===s)for(let o=t.length-1;o>=0;o--)try{let s=(0,r.realtypeof)(t[o]);e.proxyTypes.includes(s)&&n.destroy(t[o])}catch(i){console.error(i)}else console.warn("Not Implemented");o.revoke(),o.proxy=void 0}}static splitPath(e){return(0,r.splitPath)(e)}static evalPath(e,t){return(0,r.evalPath)(e,t)}}module.exports=exports=n;
},{"./supporting-functions.js":"tgn0","./reserved-methods.js":"IDhP","./general-functions.js":"MDxB"}]},{},["Focm"], "Proxserve")
//# sourceMappingURL=/proxserve.min.js.map